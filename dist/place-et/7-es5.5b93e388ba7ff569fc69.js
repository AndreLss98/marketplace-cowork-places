!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{IQQa:function(r,n,o){"use strict";o.r(n),o.d(n,"CheckoutModule",(function(){return y}));var c,a,i,u=o("ofXK"),s=o("tyNb"),l=o("mrSG"),p=o("fXoL"),v=o("B5ND"),f=["paypal"],h=[{path:"",component:(c=function(){function r(t,n){e(this,r),this.router=t,this.checkoutService=n}var n,o,c;return n=r,(o=[{key:"ngOnInit",value:function(){console.log("Reserva: ",this.checkoutService.reserva),this.checkoutService.reserva.paypal_plan_id?this.generatePayPalSubscriptionButtons(this.checkoutService.reserva.paypal_plan_id):this.generatePayPalOrderButtons()}},{key:"generatePayPalOrderButtons",value:function(){var e=this;paypal.Buttons({createOrder:function(t,r){return r.order.create({purchase_units:[{description:e.checkoutService.reserva.titulo,amount:{currency_code:"BRL",value:e.checkoutService.reserva.valor}}]})},onApprove:function(t,r){return Object(l.a)(e,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.order.capture();case 2:t=e.sent,console.log("You have successfully created order: ",t),this.checkoutService.updateReserva(this.checkoutService.reserva.id,{paypal_order_id:t.id}).subscribe((function(e){n.router.navigate(["/"])}));case 4:case"end":return e.stop()}}),e,this)})))},onError:function(t){console.log("Erro na reserva: ",t),e.router.navigate(["/spaces/"+e.checkoutService.reserva.alugavel_id])}}).render(this.paypalElement.nativeElement)}},{key:"generatePayPalSubscriptionButtons",value:function(e){var t=this;paypal.Buttons({createSubscription:function(t,r){return r.subscription.create({plan_id:e})},onApprove:function(e,r){console.log("You have successfully created subscription: ",e),t.checkoutService.updateReserva(t.checkoutService.reserva.id,{subscription_id:e.subscriptionID}).subscribe((function(e){t.router.navigate(["/"])}))},onError:function(e){console.log("Erro na reserva: ",e),t.router.navigate(["/spaces/"+t.checkoutService.reserva.alugavel_id])}}).render(this.paypalElement.nativeElement)}}])&&t(n.prototype,o),c&&t(n,c),r}(),c.\u0275fac=function(e){return new(e||c)(p.Qb(s.b),p.Qb(v.a))},c.\u0275cmp=p.Kb({type:c,selectors:[["app-checkout"]],viewQuery:function(e,t){var r;1&e&&p.Gc(f,!0),2&e&&p.yc(r=p.jc())&&(t.paypalElement=r.first)},decls:2,vars:0,consts:[["paypal",""]],template:function(e,t){1&e&&p.Rb(0,"div",null,0)},styles:[""]}),c)}],d=((i=function t(){e(this,t)}).\u0275mod=p.Ob({type:i}),i.\u0275inj=p.Nb({factory:function(e){return new(e||i)},imports:[[s.d.forChild(h)],s.d]}),i),y=((a=function t(){e(this,t)}).\u0275mod=p.Ob({type:a}),a.\u0275inj=p.Nb({factory:function(e){return new(e||a)},imports:[[u.c,d]]}),a)},mrSG:function(e,t,r){"use strict";function n(e,t,r,n){return new(r||(r=Promise))((function(o,c){function a(e){try{u(n.next(e))}catch(t){c(t)}}function i(e){try{u(n.throw(e))}catch(t){c(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(a,i)}u((n=n.apply(e,t||[])).next())}))}r.d(t,"a",(function(){return n}))}}])}();